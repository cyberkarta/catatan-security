# AWS Pentesting
#cloud 

## Persiapan
Instalasi AWS CLI
https://docs.aws.amazon.com/cli/v1/userguide/cli-chap-install.html

Uninstall AWS CLI
```sh
sudo rm -rf /usr/local/aws-cli
sudo rm /usr/local/bin/aws
```

## Kredensial
IAM Access Key terdiri dari Access Key ID dan Secret Access Key. Access key ID berawalan dengan letter **AKIA** dengan panjang 20 karakter dan secret terdiri dari 40 karakter. Kedua string tersebut di-generate oleh AWS.

Kredensial lain adalah short-term credentials, dengan key ID berawalan **ASIA** dan beberapa string yang disebut dengan session token.

Konfigurasi profile name pada aws cli.
```sh
aws configure --profile PROFILENAME
```

## Reconnaissance
Melihat dan mengcopy s3 bucket secara anonim.
```sh
aws s3 ls s3://bucketname/ --no-sign-request
aws s3 cp s3://bucketname/filename --no-sign-request
```

Finding the Account ID belonging to an access key:
```sh
aws sts get-access-key-info --access-key-id AKIAEXAMPLE 
```

Determining the Username the access key you're using belongs to
```sh
aws sts get-caller-identity --profile PROFILENAME
```

Listing all the EC2 instances running in an account
```sh
aws ec2 describe-instances --output text --profile PROFILENAME
```

Listing all the EC2 instances running in an account in a different region
```sh
aws ec2 describe-instances --output text --region us-east-1 --profile PROFILENAME
```

## Secrets Manager
```sh
aws secretsmanager help
aws secretsmanager list-secrets
aws secretsmanager get-secret-value
```